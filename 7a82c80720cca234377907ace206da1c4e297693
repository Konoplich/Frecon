{
  "comments": [
    {
      "key": {
        "uuid": "9f5d6134_9037bad0",
        "filename": "input.c",
        "patchSetId": 1
      },
      "lineNbr": 23,
      "author": {
        "id": 1000985
      },
      "writtenOn": "2014-11-21T19:04:50Z",
      "side": 1,
      "message": "Are you trying to keep alphabetical order here?",
      "range": {
        "startLine": 23,
        "startChar": 10,
        "endLine": 23,
        "endChar": 14
      },
      "revId": "7a82c80720cca234377907ace206da1c4e297693",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ff5e5d2a_59460ff2",
        "filename": "input.c",
        "patchSetId": 1
      },
      "lineNbr": 23,
      "author": {
        "id": 1003290
      },
      "writtenOn": "2014-11-21T20:27:13Z",
      "side": 1,
      "message": "Not really.",
      "parentUuid": "9f5d6134_9037bad0",
      "revId": "7a82c80720cca234377907ace206da1c4e297693",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bf586542_4e13e7fe",
        "filename": "main.c",
        "patchSetId": 1
      },
      "lineNbr": 52,
      "author": {
        "id": 1000985
      },
      "writtenOn": "2014-11-21T19:04:50Z",
      "side": 1,
      "message": "You really should use getopt for this, see e.g. Minijail: https://cs.corp.google.com/#chromeos_public/src/platform2/minijail/minijail0.c\u0026l\u003d134",
      "range": {
        "startLine": 52,
        "startChar": 0,
        "endLine": 52,
        "endChar": 14
      },
      "revId": "7a82c80720cca234377907ace206da1c4e297693",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bf586542_71e56ab8",
        "filename": "main.c",
        "patchSetId": 1
      },
      "lineNbr": 52,
      "author": {
        "id": 1003290
      },
      "writtenOn": "2014-11-21T20:27:13Z",
      "side": 1,
      "message": "Use getopt for what?\nWe are using getopt to read command line options for frecon.\nThis code is to parse a sinngle string with spaces as separators into argv style command strings for execve to use, for the shell/agetty or whatever we want to run in frecon.\nI would gladly use off-the-shelf tool for this, but I haven\u0027t found amything.",
      "parentUuid": "bf586542_4e13e7fe",
      "revId": "7a82c80720cca234377907ace206da1c4e297693",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3f1e355a_a8d02304",
        "filename": "main.c",
        "patchSetId": 1
      },
      "lineNbr": 52,
      "author": {
        "id": 1000985
      },
      "writtenOn": "2014-11-21T22:02:01Z",
      "side": 1,
      "message": "I was thinking of using getopt also over the |optarg| variable, but that doesn\u0027t really work.\n\nI\u0027m a little bit scared of this code, parsing is always tricky and especially if done in C. Is there a reason why the console was written in C?\n\nAre there cases in which we will need to call something different than the default cmdline?\n\nThere\u0027s a tokenize() implementation inside Minijail, and we also use strtok_r to split strings. Even if we still need to do some parsing, maybe we can restrict the input strings to be easily parseable?",
      "parentUuid": "bf586542_71e56ab8",
      "revId": "7a82c80720cca234377907ace206da1c4e297693",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1f9ed122_7e774d77",
        "filename": "main.c",
        "patchSetId": 1
      },
      "lineNbr": 52,
      "author": {
        "id": 1003290
      },
      "writtenOn": "2014-11-22T00:16:37Z",
      "side": 1,
      "message": "We will need to run something else (tail -f on a log file for instance), instead of agetty during ramdisk/recovery and in some factory scenarios.\nI have considered strtok, but it could be very useful to be able to escape spaces or use quoted strings in case we will need to pass a filename with spaces or some message as argument to whatever we are running as child of frecon.\n\nThe parser is in C, because the rest of the frecon is in C, which was a choice by Stephane. C generally produces smallest executables and since frecon always runs at boot time load times are important.\n\nThe --exec command line for frecon will come from our read-only scripts in init or on ramdisk. If somebody has ability to launch frecon with arbitrary command line, exploiting frecon will  not help gain any more privileges since they already can run programs.\n\nI tried to make my parser as straightforward as possible and I have tested it outside frecon first but any additional eyebals on it are welcome.",
      "parentUuid": "3f1e355a_a8d02304",
      "revId": "7a82c80720cca234377907ace206da1c4e297693",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1f9ed122_1ee96941",
        "filename": "main.c",
        "patchSetId": 1
      },
      "lineNbr": 52,
      "author": {
        "id": 1000985
      },
      "writtenOn": "2014-11-22T00:30:08Z",
      "side": 1,
      "message": "If the --exec cmdline for frecon will always come from the verified partition, then I guess we should be OK. I\u0027ll take a look at the parsing code.",
      "parentUuid": "1f9ed122_7e774d77",
      "revId": "7a82c80720cca234377907ace206da1c4e297693",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bf0a2512_b5e997be",
        "filename": "main.c",
        "patchSetId": 1
      },
      "lineNbr": 65,
      "author": {
        "id": 1106179
      },
      "writtenOn": "2014-11-24T22:11:50Z",
      "side": 1,
      "message": "Please provide a comment describing what the parsing is looking for",
      "revId": "7a82c80720cca234377907ace206da1c4e297693",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "df7199c8_dc3a21ea",
        "filename": "main.c",
        "patchSetId": 1
      },
      "lineNbr": 205,
      "author": {
        "id": 1106179
      },
      "writtenOn": "2014-11-24T22:11:50Z",
      "side": 1,
      "message": "optarg doesn\u0027t change per iteration?  This is running the same command on each terminal?  Maybe I\u0027m missing something?",
      "revId": "7a82c80720cca234377907ace206da1c4e297693",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "df7199c8_9c34a9fe",
        "filename": "main.c",
        "patchSetId": 1
      },
      "lineNbr": 218,
      "author": {
        "id": 1106179
      },
      "writtenOn": "2014-11-24T22:11:50Z",
      "side": 1,
      "message": "execN is intended as N\u003dterminal number?  I\u0027d rather that the terminal number be passed as a command line arguement.   If we increase MAX_TERMINALS we shouldn\u0027t have to add EXEC5, EXEC6, etc",
      "revId": "7a82c80720cca234377907ace206da1c4e297693",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}